import{initializeApp as l}from"https://www.gstatic.com/firebasejs/9.30.0/firebase-app.js";import{getDatabase as u,ref as f,onValue as p}from"https://www.gstatic.com/firebasejs/9.30.0/firebase-database.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function i(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(e){if(e.ep)return;e.ep=!0;const n=i(e);fetch(e.href,n)}})();const m=document.getElementById("log");function o(...s){console.log(...s),m.textContent+=s.map(r=>typeof r=="object"?JSON.stringify(r):String(r)).join(" ")+"\\n"}const a={apiKey:"AIzaSyA6sbgEfeTBvT_zQbdJtErAzK_8s7rcUoU",authDomain:"myproject-d8e61.firebaseapp.com",projectId:"myproject-d8e61",storageBucket:"myproject-d8e61.firebasestorage.app",messagingSenderId:"270167245798",appId:"1:270167245798:web:b38511a3b10deaf5d9cc27",measurementId:"G-LJ40CBFL0Q",databaseURL:"https://myproject-d8e61-default-rtdb.firebaseio.com/sensors.json"};o("Initializing Firebase app...");const d=l(a);o("App initialized:",!!d);try{const s=u(d);o("getDatabase ok");const r="sensors";o("ROOT_PATH =",r),o("Testing raw fetch to /sensors.json ..."),fetch(a.databaseURL+"/sensors.json").then(t=>t.text().then(e=>{o("REST status",t.status),o("REST body",e)})).catch(t=>o("REST fetch error:",t)),o("Attaching onValue listener...");const i=f(s,r);p(i,t=>{o("onValue fired. exists:",t.exists()),o("snap.val():",t.val()),b(t.val())},t=>{o("onValue error:",t),document.querySelector("#tbl tbody").innerHTML="<tr><td colspan=3>Error: "+(t.message||t)+"</td></tr>"})}catch(s){o("Exception while setting up DB:",s)}function b(s){const r=document.querySelector("#tbl tbody");if(r.innerHTML="",!s){r.innerHTML="<tr><td colspan=3>No data</td></tr>";return}Object.entries(s).forEach(([i,t])=>{const e=document.createElement("tr");e.innerHTML=`<td>${i}</td><td>${t.Humidity??""}</td><td>${t.temperature??t.Temperature??""}</td>`,r.appendChild(e)})}
